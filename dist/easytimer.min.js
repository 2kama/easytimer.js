!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.Timer=t()}(this,function(){"use strict";function n(n,t,e){var o=void 0,i="";for(o=0;o<t;o+=1)i+=String(e);return(i+n).slice(-i.length)}function t(){this.secondTenths=0,this.seconds=0,this.minutes=0,this.hours=0,this.days=0,this.toString=function(t,e,o){t=t||["hours","minutes","seconds"],e=e||":",o=o||2;var i=[],s=void 0;for(s=0;s<t.length;s+=1)void 0!==this[t[s]]&&i.push(n(this[t[s]],o,"0"));return i.join(e)}}function e(){return"undefined"!=typeof document}function o(){return S}function i(n,t){return(n%t+t)%t}var s="undefined"!=typeof window?window.CustomEvent:void 0;"undefined"!=typeof window&&"function"!=typeof s&&((s=function(n,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),e}).prototype=window.Event.prototype,window.CustomEvent=s);var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},u=10,d=60,c=60,f=24,a=0,h=1,v=2,l=3,m=4,y="secondTenths",p="seconds",w="minutes",b="hours",g="days",E={secondTenths:100,seconds:1e3,minutes:6e4,hours:36e5,days:864e5},T={secondTenths:u,seconds:d,minutes:c,hours:f},S="undefined"!=typeof module&&module.exports&&"function"==typeof require?require("events"):void 0;return function(){function n(n,t){var e=Math.floor(t);W[n]=e,Q[n]=n!==g?i(e,T[n]):e}function s(n){return U(n,g)}function j(n){return U(n,b)}function C(n){return U(n,w)}function L(n){return U(n,p)}function M(n){return U(n,y)}function U(t,e){var o=W[e];return n(e,t/E[e]),W[e]!==o}function V(){A(),z()}function A(){clearInterval(X),X=void 0,Z=!1,$=!1}function k(n){N()||R(n),x()}function x(){if(K())throw new Error("Timer already running");if(!O()){var n=E[_];dn=Date.now()-W.secondTenths*E[y]*nn,X=setInterval(D,n),Z=!0,$=!1}}function D(){var n=nn>0?Date.now()-dn:dn-Date.now(),t={};t[y]=M(n),t[p]=L(n),t[w]=C(n),t[b]=j(n),t[g]=s(n),P(t),tn(Q),O()&&(J("targetAchieved",cn),H())}function P(n){n[y]&&J("secondTenthsUpdated",cn),n[p]&&J("secondsUpdated",cn),n[w]&&J("minutesUpdated",cn),n[b]&&J("hoursUpdated",cn),n[g]&&J("daysUpdated",cn)}function q(){return Q.days>sn[m]||Q.days===sn[m]&&(Q.hours>sn[l]||Q.hours===sn[l]&&(Q.minutes>sn[v]||Q.minutes===sn[v]&&(Q.seconds>=sn[h]||Q.seconds===sn[p]&&Q.secondTenths>=sn[a])))}function I(){return Q.days<sn[m]||Q.days===sn[m]&&(Q.hours<sn[l]||Q.hours===sn[l]&&(Q.minutes<sn[v]||Q.minutes===sn[v]&&(Q.seconds<sn[h]||Q.seconds===sn[h]&&Q.secondTenths<=sn[a])))}function O(){return sn instanceof Array&&(en.countdown&&I()||!en.countdown&&q())}function z(){for(var n in Q)Q.hasOwnProperty(n)&&"number"==typeof Q[n]&&(Q[n]=0);for(var t in W)W.hasOwnProperty(t)&&"number"==typeof W[t]&&(W[t]=0)}function R(n){_=n&&"string"==typeof n.precision?n.precision:p,tn=n&&"function"==typeof n.callback?n.callback:function(){},nn=n&&!0===n.countdown?-1:1,un=n&&!0===n.countdown,n&&"object"===r(n.target)&&F(n.target),n&&"object"===r(n.startValues)&&G(n.startValues),sn=sn||!un?sn:[0,0,0,0,0],en={precision:_,callback:tn,countdown:"object"===(void 0===n?"undefined":r(n))&&!0===n.countdown,target:sn,startValues:rn},on=n}function B(n){var t=void 0,e=void 0,o=void 0,i=void 0,s=void 0,y=void 0;if("object"===(void 0===n?"undefined":r(n)))if(n instanceof Array){if(5!==n.length)throw new Error("Array size not valid");y=n}else y=[n.secondTenths||0,n.seconds||0,n.minutes||0,n.hours||0,n.days||0];for(var p=0;p<n.length;p+=1)n[p]<0&&(n[p]=0);return t=y[a],e=y[h]+Math.floor(t/u),o=y[v]+Math.floor(e/d),i=y[l]+Math.floor(o/c),s=y[m]+Math.floor(i/f),y[a]=t%u,y[h]=e%d,y[v]=o%c,y[l]=i%f,y[m]=s,y}function F(n){sn=B(n)}function G(n){rn=B(n),Q.secondTenths=rn[a],Q.seconds=rn[h],Q.minutes=rn[v],Q.hours=rn[l],Q.days=rn[m],W.days=Q.days,W.hours=W.days*f+Q.hours,W.minutes=W.hours*c+Q.minutes,W.seconds=W.minutes*d+Q.seconds,W.secondTenths=W.seconds*u+Q.secondTenths}function H(){V(),J("stopped",cn)}function J(n,t){e()?Y.dispatchEvent(new CustomEvent(n,t)):o()&&Y.emit(n,t)}function K(){return Z}function N(){return $}var Q=new t,W=new t,X=void 0,Y=e()?document.createElement("span"):o()?new S.EventEmitter:void 0,Z=!1,$=!1,_=void 0,nn=void 0,tn=void 0,en={},on=void 0,sn=void 0,rn=void 0,un=void 0,dn=void 0,cn={detail:{timer:this}};void 0!==this&&(this.start=function(n){k(n),J("started",cn)},this.pause=function(){A(),$=!0,J("paused",cn)},this.stop=H,this.reset=function(){V(),k(on),J("reset",cn)},this.isRunning=K,this.isPaused=N,this.getTimeValues=function(){return Q},this.getTotalTimeValues=function(){return W},this.getConfig=function(){return en},this.addEventListener=function(n,t){e()?Y.addEventListener(n,t):o()&&Y.on(n,t)},this.removeEventListener=function(n,t){e()?Y.removeEventListener(n,t):o()&&Y.removeListener(n,t)})}});
